import{b as E}from"./vendor-a349760e.js";var a={};Object.defineProperty(a,"__esModule",{value:!0});a.spyOn=a.mocked=a.fn=x=a.ModuleMocker=void 0;function g(l,e,t){return e in l?Object.defineProperty(l,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[e]=t,l}const d="mockConstructor",b=/[\s!-\/:-@\[-`{-~]/,I=new RegExp(b.source,"g"),R=new Set(["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield"]);function S(l,e){let t;switch(e){case 1:t=function(o){return l.apply(this,arguments)};break;case 2:t=function(o,r){return l.apply(this,arguments)};break;case 3:t=function(o,r,s){return l.apply(this,arguments)};break;case 4:t=function(o,r,s,i){return l.apply(this,arguments)};break;case 5:t=function(o,r,s,i,n){return l.apply(this,arguments)};break;case 6:t=function(o,r,s,i,n,c){return l.apply(this,arguments)};break;case 7:t=function(o,r,s,i,n,c,u){return l.apply(this,arguments)};break;case 8:t=function(o,r,s,i,n,c,u,f){return l.apply(this,arguments)};break;case 9:t=function(o,r,s,i,n,c,u,f,p){return l.apply(this,arguments)};break;default:t=function(){return l.apply(this,arguments)};break}return t}function M(l){return Object.prototype.toString.apply(l).slice(8,-1)}function P(l){const e=M(l);return e==="Function"||e==="AsyncFunction"||e==="GeneratorFunction"?"function":Array.isArray(l)?"array":e==="Object"?"object":e==="Number"||e==="String"||e==="Boolean"||e==="Symbol"?"constant":e==="Map"||e==="WeakMap"||e==="Set"?"collection":e==="RegExp"?"regexp":l===void 0?"undefined":l===null?"null":null}function F(l,e){if(e==="arguments"||e==="caller"||e==="callee"||e==="name"||e==="length"){const t=M(l);return t==="Function"||t==="AsyncFunction"||t==="GeneratorFunction"}return e==="source"||e==="global"||e==="ignoreCase"||e==="multiline"?M(l)==="RegExp":!1}class C{constructor(e){g(this,"_environmentGlobal",void 0),g(this,"_mockState",void 0),g(this,"_mockConfigRegistry",void 0),g(this,"_spyState",void 0),g(this,"_invocationCallCounter",void 0),this._environmentGlobal=e,this._mockState=new WeakMap,this._mockConfigRegistry=new WeakMap,this._spyState=new Set,this._invocationCallCounter=1}_getSlots(e){if(!e)return[];const t=new Set,o=this._environmentGlobal.Object.prototype,r=this._environmentGlobal.Function.prototype,s=this._environmentGlobal.RegExp.prototype,i=Object.prototype,n=Function.prototype,c=RegExp.prototype;for(;e!=null&&e!==o&&e!==r&&e!==s&&e!==i&&e!==n&&e!==c;){const u=Object.getOwnPropertyNames(e);for(let f=0;f<u.length;f++){const p=u[f];if(!F(e,p)){const k=Object.getOwnPropertyDescriptor(e,p);(k!==void 0&&!k.get||e.__esModule)&&t.add(p)}}e=Object.getPrototypeOf(e)}return Array.from(t)}_ensureMockConfig(e){let t=this._mockConfigRegistry.get(e);return t||(t=this._defaultMockConfig(),this._mockConfigRegistry.set(e,t)),t}_ensureMockState(e){let t=this._mockState.get(e);return t||(t=this._defaultMockState(),this._mockState.set(e,t)),t.calls.length>0&&(t.lastCall=t.calls[t.calls.length-1]),t}_defaultMockConfig(){return{mockImpl:void 0,mockName:"jest.fn()",specificMockImpls:[],specificReturnValues:[]}}_defaultMockState(){return{calls:[],instances:[],invocationCallOrder:[],results:[]}}_makeComponent(e,t){if(e.type==="object")return new this._environmentGlobal.Object;if(e.type==="array")return new this._environmentGlobal.Array;if(e.type==="regexp")return new this._environmentGlobal.RegExp("");if(e.type==="constant"||e.type==="collection"||e.type==="null"||e.type==="undefined")return e.value;if(e.type==="function"){const o=e.members&&e.members.prototype&&e.members.prototype.members||{},r=this._getSlots(o),s=this,i=S(function(...c){const u=s._ensureMockState(n),f=s._ensureMockConfig(n);u.instances.push(this),u.calls.push(c);const p={type:"incomplete",value:void 0};u.results.push(p),u.invocationCallOrder.push(s._invocationCallCounter++);let k,O,y=!1;try{k=(()=>{if(this instanceof n){r.forEach(h=>{if(o[h].type==="function"){const v=this[h];this[h]=s.generateFromMetadata(o[h]),this[h]._protoImpl=v}});const w=f.specificMockImpls.length?f.specificMockImpls.shift():f.mockImpl;return w&&w.apply(this,arguments)}let m=f.specificMockImpls.shift();if(m===void 0&&(m=f.mockImpl),m)return m.apply(this,arguments);if(n._protoImpl)return n._protoImpl.apply(this,arguments)})()}catch(m){throw O=m,y=!0,m}finally{p.type=y?"throw":"return",p.value=y?O:k}return k},e.length||0),n=this._createMockFunction(e,i);return n._isMockFunction=!0,n.getMockImplementation=()=>this._ensureMockConfig(n).mockImpl,typeof t=="function"&&this._spyState.add(t),this._mockState.set(n,this._defaultMockState()),this._mockConfigRegistry.set(n,this._defaultMockConfig()),Object.defineProperty(n,"mock",{configurable:!1,enumerable:!0,get:()=>this._ensureMockState(n),set:c=>this._mockState.set(n,c)}),n.mockClear=()=>(this._mockState.delete(n),n),n.mockReset=()=>(n.mockClear(),this._mockConfigRegistry.delete(n),n),n.mockRestore=()=>(n.mockReset(),t?t():void 0),n.mockReturnValueOnce=c=>n.mockImplementationOnce(()=>c),n.mockResolvedValueOnce=c=>n.mockImplementationOnce(()=>Promise.resolve(c)),n.mockRejectedValueOnce=c=>n.mockImplementationOnce(()=>Promise.reject(c)),n.mockReturnValue=c=>n.mockImplementation(()=>c),n.mockResolvedValue=c=>n.mockImplementation(()=>Promise.resolve(c)),n.mockRejectedValue=c=>n.mockImplementation(()=>Promise.reject(c)),n.mockImplementationOnce=c=>(this._ensureMockConfig(n).specificMockImpls.push(c),n),n.mockImplementation=c=>{const u=this._ensureMockConfig(n);return u.mockImpl=c,n},n.mockReturnThis=()=>n.mockImplementation(function(){return this}),n.mockName=c=>{if(c){const u=this._ensureMockConfig(n);u.mockName=c}return n},n.getMockName=()=>this._ensureMockConfig(n).mockName||"jest.fn()",e.mockImpl&&n.mockImplementation(e.mockImpl),n}else{const o=e.type||"undefined type";throw new Error("Unrecognized type "+o)}}_createMockFunction(e,t){let o=e.name;if(!o)return t;const r="bound ";let s="";if(o&&o.startsWith(r))do o=o.substring(r.length),s=".bind(null)";while(o&&o.startsWith(r));if(o===d)return t;(R.has(o)||/^\d/.test(o))&&(o="$"+o),b.test(o)&&(o=o.replace(I,"$"));const i="return function "+o+"() {return "+d+".apply(this,arguments);}"+s;return new this._environmentGlobal.Function(d,i)(t)}_generateMock(e,t,o){const r=this._makeComponent(e);return e.refID!=null&&(o[e.refID]=r),this._getSlots(e.members).forEach(s=>{const i=e.members&&e.members[s]||{};i.ref!=null?t.push(function(n){return()=>r[s]=o[n]}(i.ref)):r[s]=this._generateMock(i,t,o)}),e.type!=="undefined"&&e.type!=="null"&&r.prototype&&typeof r.prototype=="object"&&(r.prototype.constructor=r),r}generateFromMetadata(e){const t=[],o={},r=this._generateMock(e,t,o);return t.forEach(s=>s()),r}getMetadata(e,t){const o=t||new Map,r=o.get(e);if(r!=null)return{ref:r};const s=P(e);if(!s)return null;const i={type:s};if(s==="constant"||s==="collection"||s==="undefined"||s==="null")return i.value=e,i;s==="function"&&(i.name=e.name,e._isMockFunction===!0&&(i.mockImpl=e.getMockImplementation())),i.refID=o.size,o.set(e,i.refID);let n=null;return s!=="array"&&this._getSlots(e).forEach(c=>{if(s==="function"&&e._isMockFunction===!0&&c.match(/^mock/))return;const u=this.getMetadata(e[c],o);u&&(n||(n={}),n[c]=u)}),n&&(i.members=n),i}isMockFunction(e){return!!e&&e._isMockFunction===!0}fn(e){const t=e?e.length:0,o=this._makeComponent({length:t,type:"function"});return e&&o.mockImplementation(e),o}spyOn(e,t,o){if(o)return this._spyOnProperty(e,t,o);if(typeof e!="object"&&typeof e!="function")throw new Error("Cannot spyOn on a primitive value; "+this._typeOf(e)+" given");const r=e[t];if(!this.isMockFunction(r)){if(typeof r!="function")throw new Error("Cannot spy the "+t+" property because it is not a function; "+this._typeOf(r)+" given instead");const s=Object.prototype.hasOwnProperty.call(e,t);let i=Object.getOwnPropertyDescriptor(e,t),n=Object.getPrototypeOf(e);for(;!i&&n!==null;)i=Object.getOwnPropertyDescriptor(n,t),n=Object.getPrototypeOf(n);let c;if(i&&i.get){const u=i.get;c=this._makeComponent({type:"function"},()=>{i.get=u,Object.defineProperty(e,t,i)}),i.get=()=>c,Object.defineProperty(e,t,i)}else c=this._makeComponent({type:"function"},()=>{s?e[t]=r:delete e[t]}),e[t]=c;c.mockImplementation(function(){return r.apply(this,arguments)})}return e[t]}_spyOnProperty(e,t,o="get"){if(typeof e!="object"&&typeof e!="function")throw new Error("Cannot spyOn on a primitive value; "+this._typeOf(e)+" given");if(!e)throw new Error("spyOn could not find an object to spy upon for "+t);if(!t)throw new Error("No property name supplied");let r=Object.getOwnPropertyDescriptor(e,t),s=Object.getPrototypeOf(e);for(;!r&&s!==null;)r=Object.getOwnPropertyDescriptor(s,t),s=Object.getPrototypeOf(s);if(!r)throw new Error(t+" property does not exist");if(!r.configurable)throw new Error(t+" is not declared configurable");if(!r[o])throw new Error("Property "+t+" does not have access type "+o);const i=r[o];if(!this.isMockFunction(i)){if(typeof i!="function")throw new Error("Cannot spy the "+t+" property because it is not a function; "+this._typeOf(i)+" given instead");r[o]=this._makeComponent({type:"function"},()=>{r[o]=i,Object.defineProperty(e,t,r)}),r[o].mockImplementation(function(){return i.apply(this,arguments)})}return Object.defineProperty(e,t,r),r[o]}clearAllMocks(){this._mockState=new WeakMap}resetAllMocks(){this._mockConfigRegistry=new WeakMap,this._mockState=new WeakMap}restoreAllMocks(){this._spyState.forEach(e=>e()),this._spyState=new Set}_typeOf(e){return e==null?""+e:typeof e}mocked(e,t=!1){return e}}var x=a.ModuleMocker=C;const _=new C(E),A=_.fn.bind(_);a.fn=A;const D=_.spyOn.bind(_);a.spyOn=D;const G=_.mocked.bind(_);a.mocked=G;export{x as M};
//# sourceMappingURL=vendor_jest_mock-7bd56a3f.js.map
